#{extends '/setup/layout.html' /}
#{set title:'Чистка' /}
#{set 'menu'}
<div>
    <a href="@{controllers.Application.index()}">
        Домой
    </a>
</div>
<div>
    <a href="@{ground.Anodes.list()}">&{'names.anodes'}</a>
</div>
<div>
    <a href="@{ground.Takes.list()}">&{'takes'}</a>
</div>
<div>
    <a href="@{ground.Cells.list()}">&{'cells'}</a>
</div>
<div>
    <a href="@{ground.Rows.list()}">&{'rows'}</a>
</div>
<div>
    <a href="@{ground.Tiers.list()}">&{'tiers'}</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(1)}">Чистка бригада 1</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(2)}">Чистка бригада 2</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(3)}">Чистка бригада 3</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(4)}">Чистка бригада 4</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(5)}">Чистка бригада 5</a>
</div>

#{/set}


<div>
    <div>
        <form action="@{controllers.action.Cleanings.clean(number)}" method="post">
            <div class="flex">
                <div>
                    <div class="flex flex-between">
                        <div>
                            <h1>${title}</h1>
                        </div>
                        <div class="flex">
                            <label class="label" for="date">Дата чистки</label>
                            <input type="date" name="rq.date" value="${date}" class="input" id="date"/>
                        </div>
                    </div>
                    <div class="mt-4 grid grid-10">
                        #{list units}
                        #{set cell:_.cellStatus.cell/}
                        <div class="list-bordered" id="unit_'${cell.id}'" hx-target="#detail"
                             hx-post="@{controllers.action.Cleanings.detail(cell.id)}"
                             hx-trigger="click">
                            <div class="flex flex-around">
                                <div class="p-2">
                                    <a href="@{controllers.ground.Cells.view(cell.id)}">
                                        ${cell.name}
                                    </a>
                                </div>
                                <div class="p-2">
                                    <label for="cell_'${cell.id}'"></label>
                                    <input type="checkbox" name="rq.cell" value="${cell.id}" id="cell_'${cell.id}'">
                                </div>
                            </div>
                            <div>
                                <div class="flex flex-around">
                                    #{list _.takes}
                                    <div class="flex-center">
                                        <div class="align-center">
                                            <label for="take_'${_.id}'">${_.number}</label>
                                            <input class="mx-1" type="checkbox" name="rq.take" value="${_.id}"
                                                   id="take_'${_.id}'">
                                        </div>
                                    </div>
                                    #{/ list}
                                </div>
                            </div>
                        </div>
                        #{/ list}
                    </div>
                    <div class="flex flex-end mt-3">
                        <button type="submit" class="button">
                            Сохранить
                        </button>
                    </div>
                </div>
                <div class="flex-layout max-20">
                    <div class="flex-content">
                        <div class="my-3">
                            <h1>Подробно</h1>
                        </div>
                        <div id="detail">

                        </div>
                    </div>


                </div>
            </div>

        </form>
    </div>
</div>