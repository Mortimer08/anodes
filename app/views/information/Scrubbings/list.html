#{extends '/setup/layout.html' /}
#{set title:'Подъемы' /}
#{set 'menu'}
*{
<div>
    <a href="@{controllers.Application.index()}">
        Домой
    </a>
</div>
<div>
    <a href="@{ground.Anodes.list()}">&{'names.anodes'}</a>
</div>
<div>
    <a href="@{ground.Takes.list()}">&{'takes'}</a>
</div>
<div>
    <a href="@{ground.Cells.list()}">&{'cells'}</a>
</div>
<div>
    <a href="@{ground.Rows.list()}">&{'rows'}</a>
</div>
<div>
    <a href="@{ground.Tiers.list()}">&{'tiers'}</a>
</div>}*
<div>
    <a href="@{controllers.action.Cleanings.list(1)}">Чистка бригада 1</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(2)}">Чистка бригада 2</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(3)}">Чистка бригада 3</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(4)}">Чистка бригада 4</a>
</div>
<div>
    <a href="@{controllers.action.Cleanings.list(5)}">Чистка бригада 5</a>
</div>
<div>
    <a href="@{controllers.information.Vacuumings.list()}">Крутежка</a>
</div>
<div>
    <a href="@{controllers.information.Scrubbings.list()}">Подъемы</a>
</div>

#{/set}

<div class="flex">

    <div class="max-80 mr-3">
        <div class="flex">
            <div>
                <h1>${title}</h1>
            </div>
            <div class="badge ml-3" id="count">
                <h2>${scrubbings.size()}</h2>
            </div>
        </div>
        <div class="table" id="items">
            <table>
                <thead>
                <tr>
                    #{list controllers.information.view.ScrubbingView.values()}
                    <th hx-post="@{controllers.information.Scrubbings.sort(_)}" hx-target="#items"
                        class="${_.name == f.sort ? f.order : ''}">
                        ${_.title}
                    </th>
                    #{/list}
                </tr>
                </thead>
                <tbody>
                #{list scrubbings}
                <tr>
                    <td>${_.happened?.format("dd-MM-yyyy")}</td>
                    <td>${_.take}</td>
                    <td>${_.machined}</td>
                    <td>${_.firstDamage}</td>
                    <td>${_.toChange}</td>
                    <td>${_.changed}</td>
                    <td>${_.comment}</td>
                </tr>
                #{/list}
                </tbody>
            </table>
        </div>
    </div>
    <div class="flex-content">
        <div class="pl-3 border-left border-dark-low">
            <div class="flex flex-between flex-middle max-100">
                <h1>Фильтр</h1>
                <div class="" id="cDetail_nane"></div>
            </div>
            <form>
                <div class="flex flex-between flex-middle my-3 shadow-150 pb-3 pr-3">
                    <div id="detail" hx-post="@{controllers.information.Scrubbings.filterTeam()}"
                         hx-target="#items"
                         hx-trigger="change">
                        <div><h3 class="mb-3">Бригады</h3></div>
                        #{list models.Team.values()}
                        <div class="flex flex-middle">
                            <div>
                                <label class="label label-light" for="team_${_}">${_.name}</label>
                            </div>
                            <input class="checkbox" type="checkbox" id="team_${_}" name="teamIndex"
                                   value="${_.ordinal()}" checked>
                        </div>
                        #{/list}
                    </div>
                </div>
            </form>
            <form>
                <div class="flex flex-between flex-middle my-3 shadow-150 pb-3 pr-3">
                    <div id="" hx-post="@{controllers.information.Scrubbings.filterDate()}"
                         hx-target="#items"
                         hx-trigger="change">
                        <div><h3 class="mb-3">Даты</h3></div>
                        <label class="label label-light" for="begin">Начало</label>
                        <input class="input ml-3" type="date" id="begin"
                               name="begin" value="${f.begin.format()}">
                        <label class="label label-light" for="end">Окончание</label>
                        <input class="input ml-3" type="date" id="end"
                               name="end" value="${f.end.format()}">
                        <input type="hidden" name="f.sort" value="${f.sort}">
                        <input type="hidden" name="f.order" value="${f.order}" checked>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
